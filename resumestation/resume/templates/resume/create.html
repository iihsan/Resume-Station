{% extends 'base.html' %} {% load static %} {% block content %} {% if error %}
<div class="alert alert-danger" role="alert" style="margin-top: 30px;">
    <strong>{{error}}</strong>
</div>
{% endif %}


<section class="testimonial py-5" id="testimonial">
    <div class="container">
        <div class="row ">
            <div class="col-md-4 py-5 bg-dark text-white text-center ">
                <div class=" ">
                    <div class="card-body">
                        <img src="{% static 'dart-board.png' %}" style="width:30%">
                        <h2 class="py-3">Create Your Resume</h2>
                        <p>"If opportunity doesnâ€™t knock, build a door." -Milton Berle
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-md-8 py-5 border text-center">
                <h4 class="pb-4">Please fill with your details</h4>
                <form class="js-resume-form">
                    {% csrf_token %}
                    <div class="form-row">
                        <div class="form-group col-md-6 pb-3" style="margin: auto;">
                            <input id="Full Name" name="username" placeholder="User Name" class="form-control" type="text" style="margin-bottom: 20px;">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-6 pb-3" style="margin: auto;">
                            <input type="title" class="form-control" placeholder="Title" name="title" style="margin-bottom: 20px;">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-6 pb-3" style="margin: auto;">
                            <input type="about" class="form-control" placeholder="About" name="about" style="margin-bottom: 20px;">
                        </div>
                    </div>
                    <span class="message0"></span>
                    <button class="js-details-btn btn btn-danger text-white"><i class="fa fa-plus"> </i>&nbsp; Add Details</button>
                    <hr>


                    <h5 style="margin: 0px; padding: 0px;">Personal Skills</h5>
                    <div id="personal-skills">
                        <div class="form-row mt-5">
                            <div class="form-group col-md-6 pb-3" style="margin: auto;">
                                <span class="message-1-1"></span>
                                <input type="text" class="form-control skill-input" placeholder="Personal Skills" name="skill-input" style="margin-bottom: 20px;">
                                <input type="number" class="form-control skill-input-level" placeholder="Level between (1-100)" name="skill-input-level" style="margin-bottom: 20px;">
                                <span class="message-1"></span>
                                <button class="js-skill-btn btn btn-danger text-white"><i class="fa fa-plus"> </i> &nbsp; Add Skill</button>
                            </div>
                        </div>
                    </div>
                    <hr>

                    <h5 style="margin: 0px; padding: 0px;">Professional Skills</h5>
                    <div id="professional-skills">
                        <div class="form-row mt-5">
                            <div class="form-group col-md-6 pb-3" style="margin: auto;">
                                <span class="message-2-2"></span>
                                <input type="text" class="form-control professional-skills" placeholder="Professional Skills" name="professional-skills" style="margin-bottom: 20px;">
                                <input type="number" class="form-control professional-skills-level" placeholder="Level between (1-10)" name="professional-skills-level" style="margin-bottom: 20px;">
                                <span class="message-2"></span>
                                <button class="js-skill-professional-btn btn btn-danger text-white"><i class="fa fa-plus"> </i> &nbsp; Add Skill</button>
                            </div>
                        </div>
                    </div>
                    <hr>


                    <div id="work">
                        <div class="form-row mt-5">
                            <div class="form-group col-md-6 pb-3" style="margin: auto;">
                                <span class="message-3-3"></span>
                                <input type="date" class="form-control work-started" placeholder="started from" name="work-started" style="margin-bottom: 20px;">
                                <input type="date" class="form-control work-end-date" placeholder="ended on" name="work-end-date" style="margin-bottom: 20px;">
                                <input type="text" class="form-control company" placeholder="Company" name="company" style="margin-bottom: 20px;">
                                <input type="text" class="form-control designation" placeholder="Designation" name="designation" style="margin-bottom: 20px;">
                                <input type="text" class="form-control description" placeholder="Description" name="description" style="margin-bottom: 20px;">
                                <span class="message-3"></span>
                                <button class="js-work-btn btn btn-danger text-white"><i class="fa fa-plus"> </i>&nbsp; Add Work Experience</button>
                            </div>

                        </div>
                    </div>
                    <hr>

                    <div id="education">
                        <div class="form-row mt-5">
                            <div class="form-group col-md-6 pb-3" style="margin: auto;">
                                <span class="message-4-4"></span>
                                <input type="date" class="form-control started" placeholder="started from" name="started" style="margin-bottom: 20px;">
                                <input type="date" class="form-control end-date" placeholder="ended on" name="end-date" style="margin-bottom: 20px;">
                                <input type="text" class="form-control course" placeholder="Course" name="course" style="margin-bottom: 20px;">
                                <input type="text" class="form-control institution" placeholder="Name of Institution" name="institution" style="margin-bottom: 20px;">
                                <input type="text" class="form-control education-description" placeholder="Description" name="education-description" style="margin-bottom: 20px;">
                                <span class="message-4"></span>
                                <button class="js-education-btn btn btn-danger text-white"><i class="fa fa-plus"> </i>&nbsp; Add Education</button>
                            </div>

                        </div>
                    </div>
                    <hr>

                </form>

                <!-- Submit this form to Django -->
                <form class="js-resume-form" id="form" action="{% url 'create' %}" method="POST">
                    {% csrf_token %}
                    <input type="hidden" name="hidden-input-details" />
                    <input type="hidden" name="hidden-input-skills1" />
                    <input type="hidden" name="hidden-input-skills2" />
                    <input type="hidden" name="hidden-input-work" />
                    <input type="hidden" name="hidden-input-education" />
                    <span class="message"></span>
                    <button type="submit" class="js-submit-btn btn btn-info btn-lg text-white" style="font-weight: 700;">SUBMIT FORM</button>
                    <br><br>
                    <button class="js-reset-btn btn btn-outline-danger btn-md" style="font-weight: 700;">RESET FORM</button>
                </form>

            </div>
        </div>
    </div>
</section>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-serialize-object/2.5.0/jquery.serialize-object.min.js"></script>
<script>
    const details = {
        username: [],
        title: [],
        about: []
    };

    const HiddenDetails = document.querySelector('input[name="hidden-input-details"]');
    const Username = document.querySelector('input[name="username"]');
    const Title = document.querySelector('input[name="title"]');
    const about = document.querySelector('input[name="about"]');

    const elemDetailBtn = document.querySelector(".js-details-btn");

    elemDetailBtn.addEventListener('click', function(event) {
        event.preventDefault();
        const newUsername = Username.value;
        const newTitle = Title.value;
        const newAbout = about.value;

        if (newUsername == "" || newTitle == "" || newAbout == "") {
            document.querySelector('.message0').innerHTML = `
    <div class="alert alert-danger" role="alert" style="margin-top: 30px;">
    <strong>Please enter complete information.</strong> 
    </div>
    `;
            setTimeout(function() {
                document.querySelector(".message0").innerHTML = ""
            }, 2000);

        } else if (Username.disabled) {
            document.querySelector('.message0').innerHTML = `
        <div class="alert alert-warning" role="alert" style="margin-top: 30px;">
        <strong>User details already submitted.</strong> 
        </div>
        `;
            setTimeout(function() {
                document.querySelector(".message0").innerHTML = ""
            }, 2000);
        } else {
            details.username.push(newUsername);
            details.title.push(newTitle);
            details.about.push(newAbout);
            HiddenDetails.value = JSON.stringify(details);

            Username.disabled = true;
            Title.disabled = true;
            about.disabled = true;

            document.querySelector('.message0').innerHTML = `
    <div class="alert alert-success" role="alert" style="margin-top: 30px;">
    <strong>Added Details.</strong> 
    </div>
    `;
            setTimeout(function() {
                document.querySelector(".message0").innerHTML = ""
            }, 2000);
        }
    });


    const data = {
        skills1: [],
        skills1_level: []
    };


    const elemSkillInput = document.querySelector('input[name="skill-input"]');
    const elemSkillLevelInput = document.querySelector('input[name="skill-input-level"]')
    const elemSkillBtn = document.querySelector(".js-skill-btn");

    const elemHiddenInput = document.querySelector('input[name="hidden-input-skills1"]');
    const elemHiddenInputSkillLevel = document.querySelector('input[name="hidden-input-skills1-level"]');


    elemSkillBtn.addEventListener("click", function(event) {
        event.preventDefault();
        const newSkill = elemSkillInput.value;
        const newSkillLevel = elemSkillLevelInput.value;
        if (newSkill == "" || newSkillLevel == "") {
            document.querySelector('.message-1').innerHTML = `
    <div class="alert alert-danger" role="alert" style="margin-top: 30px;">
    <strong>Please enter complete information. Level should be a number (1-100)</strong> 
    </div>
    `;
            setTimeout(function() {
                document.querySelector(".message-1").innerHTML = ""
            }, 2000);

        } else if (parseInt(newSkillLevel) > 100 || parseInt(newSkillLevel) < 0) {
            document.querySelector('.message-1').innerHTML = `
    <div class="alert alert-warning" role="alert" style="margin-top: 30px;">
    <strong>Skill Level should be between (1-100).</strong> 
    </div>
    `;
            setTimeout(function() {
                document.querySelector(".message-1").innerHTML = ""
            }, 2000);
        } else {
            data.skills1.push(newSkill);
            data.skills1_level.push(newSkillLevel);
            elemHiddenInput.value = JSON.stringify(data);
            elemSkillLevelInput.value = "";
            elemSkillInput.value = "";
            document.querySelector('.message-1-1').innerHTML += `
    <div class="alert alert-success" role="alert" style="margin-top: 30px;">
    <strong>Added: ${ newSkill } ${ newSkillLevel }%</strong> 
    </div>
    `;
        }
    });


    const data1 = {
        skills2: [],
        skills2_level: []
    }

    const elemSkill2Input = document.querySelector('input[name="professional-skills"]');
    const elemSkill2LevelInput = document.querySelector('input[name="professional-skills-level"]')
    const elemSkill2Btn = document.querySelector(".js-skill-professional-btn");

    const elemHiddenInput2 = document.querySelector('input[name="hidden-input-skills2"]');

    elemSkill2Btn.addEventListener("click", function(event) {
        event.preventDefault();
        const newSkill = elemSkill2Input.value;
        const newSkillLevel = elemSkill2LevelInput.value;

        if (newSkill == "" || newSkillLevel == "") {
            document.querySelector('.message-2').innerHTML = `
    <div class="alert alert-danger" role="alert" style="margin-top: 30px;">
    <strong>Please enter complete information.</strong> 
    </div>
    `;
            setTimeout(function() {
                document.querySelector(".message-2").innerHTML = ""
            }, 1500);
        } else if (parseInt(newSkillLevel) > 10 || parseInt(newSkillLevel) < 0) {
            document.querySelector('.message-2').innerHTML = `
    <div class="alert alert-warning" role="alert" style="margin-top: 30px;">
    <strong>Skill Level should be between (1-10).</strong> 
    </div>
    `;
            setTimeout(function() {
                document.querySelector(".message-2").innerHTML = ""
            }, 2000);
        } else {
            data1.skills2.push(newSkill);
            data1.skills2_level.push(newSkillLevel);
            elemHiddenInput2.value = JSON.stringify(data1);

            document.querySelector('.message-2-2').innerHTML += `
    <div class="alert alert-success" role="alert" style="margin-top: 30px;">
    <strong>Added: ${ elemSkill2Input.value } ${ elemSkill2LevelInput.value }%</strong> 
    </div>
    `;
            elemSkill2LevelInput.value = "";
            elemSkill2Input.value = "";

        }
    });

    const work = {
        start: [],
        end: [],
        company: [],
        designation: [],
        description: []
    }

    const elemWorkInput1 = document.querySelector('input[name = "work-started"]');
    const elemWorkInput2 = document.querySelector('input[name = "work-end-date"]');
    const elemWorkInput3 = document.querySelector('input[name = "company"]');
    const elemWorkInput4 = document.querySelector('input[name = "designation"]');
    const elemWorkInput5 = document.querySelector('input[name = "description"]');
    const elemWorkBtn = document.querySelector('.js-work-btn');
    const elemHiddenInput3 = document.querySelector('input[name="hidden-input-work"]');

    elemWorkBtn.addEventListener("click", function(event) {
        event.preventDefault();
        const newWorkstarted = elemWorkInput1.value;
        const newWorkend = elemWorkInput2.value;
        const newCompany = elemWorkInput3.value;
        const newDesignation = elemWorkInput4.value;
        const newWorkDescription = elemWorkInput5.value;

        if (newWorkstarted == "" || newWorkend == "" || newCompany == "" || newDesignation == "" || newWorkDescription == "") {
            document.querySelector('.message-3').innerHTML = `
    <div class="alert alert-danger" role="alert" style="margin-top: 30px;">
    <strong>Please enter complete information.</strong> 
    </div>
    `;
            setTimeout(function() {
                document.querySelector(".message-3").innerHTML = ""
            }, 2000);
        } else {
            work.start.push(newWorkstarted);
            work.end.push(newWorkend);
            work.company.push(newCompany);
            work.designation.push(newDesignation);
            work.description.push(newWorkDescription);

            elemHiddenInput3.value = JSON.stringify(work);
            elemWorkInput1.value = "";
            elemWorkInput2.value = "";
            elemWorkInput3.value = "";
            elemWorkInput4.value = "";
            elemWorkInput5.value = "";

            document.querySelector('.message-3-3').innerHTML += `
    <div class="alert alert-success" role="alert" style="margin-top: 30px;">
    <strong>Added ${ newCompany }.</strong> 
    </div>
    `;
        }
    });

    const education = {
        start: [],
        end: [],
        course: [],
        institution: [],
        description: []
    }

    const elemEduInput1 = document.querySelector('input[name = "started"]');
    const elemEduInput2 = document.querySelector('input[name = "end-date"]');
    const elemEduInput3 = document.querySelector('input[name = "course"]');
    const elemEduInput4 = document.querySelector('input[name = "institution"]');
    const elemEduInput5 = document.querySelector('input[name = "education-description"]');
    const elemEduBtn = document.querySelector('.js-education-btn');
    const elemHiddenInput4 = document.querySelector('input[name="hidden-input-education"]');

    elemEduBtn.addEventListener("click", function(event) {
        event.preventDefault();
        const newEdustarted = elemEduInput1.value;
        const newEduend = elemEduInput2.value;
        const newCourse = elemEduInput3.value;
        const newInstitution = elemEduInput4.value;
        const newEduDescription = elemEduInput5.value;
        if (newEdustarted == "" || newEduend == "" || newCourse == "" || newInstitution == "" || newEduDescription == "") {
            document.querySelector('.message-4').innerHTML = `
    <div class="alert alert-danger" role="alert" style="margin-top: 30px;">
    <strong>Please enter complete information.</strong> 
    </div>
    `;
            setTimeout(function() {
                document.querySelector(".message-4").innerHTML = ""
            }, 2000);
        } else {

            education.start.push(newEdustarted);
            education.end.push(newEduend);
            education.course.push(newCourse);
            education.institution.push(newInstitution);
            education.description.push(newEduDescription);

            elemHiddenInput4.value = JSON.stringify(education);
            elemEduInput1.value = "";
            elemEduInput2.value = "";
            elemEduInput3.value = "";
            elemEduInput4.value = "";
            elemEduInput5.value = "";
            document.querySelector('.message-4-4').innerHTML += `
    <div class="alert alert-success" role="alert" style="margin-top: 30px;">
    <strong>Added: ${ newCourse } from ${ newInstitution }.</strong> 
    </div>
    `;
        }
    });


    const elemSubmitBtn = document.querySelector('.js-submit-btn');

    elemSubmitBtn.addEventListener("click", function(event) {
        event.preventDefault();

        if (details.username.length == 0 || data.skills1.length == 0 || data1.skills2.length == 0) {
            alert("Please enter complete information");

            document.querySelector('.message').innerHTML = `
    <div class="alert alert-danger" role="alert" style="margin-top: 30px;">
    <strong>Empty user details, professional or personal skills.</strong> 
    </div>
    `;
            setTimeout(function() {
                document.querySelector(".message").innerHTML = ""
            }, 4000);
        } else {
            const form = document.querySelector('form[id="form"]');
            form.submit();
        }
    });

    const elemResetBtn = document.querySelector('.js-reset-btn');

    elemResetBtn.addEventListener("click", function(event) {
        event.preventDefault();

        if (confirm('Do you really want to reset all the form Data?')) {

            details.username = [];
            details.title = [];
            details.about = [];

            data.skills1 = [];
            data.skills1_level = [];

            data1.skills2 = [];
            data1.skills2_level = [];

            work.start = [];
            work.end = [];
            work.company = [];
            work.designation = [];
            work.description = [];

            education.start = [];
            education.end = [];
            education.course = [];
            education.institution = [];
            education.description = [];

            document.querySelector('input[name="username"]').value = "";
            document.querySelector('input[name="title"]').value = "";
            document.querySelector('input[name="about"]').value = "";

            document.querySelector('input[name="username"]').disabled = false;
            document.querySelector('input[name="title"]').disabled = false;
            document.querySelector('input[name="about"]').disabled = false;


            document.querySelector('.message-1-1').innerHTML = `
    <div class="alert alert-success" role="alert" style="margin-top: 30px;">
    <strong>Resetting Personal Skills...</strong> 
    </div>
    `;

            document.querySelector('.message-2-2').innerHTML = `
    <div class="alert alert-success" role="alert" style="margin-top: 30px;">
    <strong>Resetting Professional Skills...</strong> 
    </div>
    `;

            document.querySelector('.message-3-3').innerHTML = `
    <div class="alert alert-success" role="alert" style="margin-top: 30px;">
    <strong>Resetting Work Experience...</strong> 
    </div>
    `;

            document.querySelector('.message-4-4').innerHTML = `
    <div class="alert alert-success" role="alert" style="margin-top: 30px;">
    <strong>Resetting Education...</strong> 
    </div>
    `;

            document.querySelector('.message').innerHTML = `
    <div class="alert alert-success" role="alert" style="margin-top: 30px;">
    <strong>From reset successfully.</strong> 
    </div>
    `;
            setTimeout(function() {
                document.querySelector(".message").innerHTML = ""
            }, 3000);

            setTimeout(function() {
                document.querySelector(".message-1-1").innerHTML = ""
            }, 3000);

            setTimeout(function() {
                document.querySelector(".message-2-2").innerHTML = ""
            }, 3000);

            setTimeout(function() {
                document.querySelector(".message-3-3").innerHTML = ""
            }, 3000);

            setTimeout(function() {
                document.querySelector(".message-4-4").innerHTML = ""
            }, 3000);
        }
    });
</script>

{% endblock %}